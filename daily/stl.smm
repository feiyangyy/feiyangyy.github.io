<<<<<<< Updated upstream
{"layout":"logicalStructure","root":{"data":{"text":"<p>STL</p>","expand":true,"uid":"b740b632-5de4-462d-bddf-81269595de64","richText":true,"isActive":false,"imgMap":{}},"children":[{"data":{"text":"<p>stl中的容器</p>","uid":"cfc7006f-154e-442e-88c0-302c1b8ba7c9","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>序列容器</p>","uid":"6b35de9a-cac0-4826-b367-d6af6d30f178","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>vector</p>","uid":"800c0495-3154-47f4-a193-4f05c18020db","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>动态数组，有动态扩容机制, 迭代器失效</p>","uid":"3a14011e-f6e4-422d-a64d-f97f7ce0bf2d","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>随机访问、连续存储，支持[]</p>","uid":"e65be76e-33fb-4103-b414-bcec8114e567","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>支持reserve和capacity</p>","uid":"027416cb-46ce-48cd-820e-c3fd021109e8","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>list</p>","uid":"2b9f8160-ac8a-49d3-8858-33b2ac50b162","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>双向链表，迭代器可往前往后</p>","uid":"82259cfc-8608-4270-b803-2cb46366f4d2","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>forward_list</p>","uid":"c954ae6f-cf56-4345-9b4d-6dad6a112dea","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>单向链表，迭代器只能往前</p>","uid":"992448f5-7970-4986-8209-1d6522b748e6","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>string</p>","uid":"acc79715-8387-46fa-be67-d7751fc8c5ee","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>basic_string的char特化版本</p>","uid":"d45e16f8-e523-41ce-b4d6-6cc225b9d349","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>deque</p>","uid":"a1b492e2-ed0d-41d2-8df4-b867e208f186","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>头尾可插入，linked array</p>","uid":"6fbcaf72-36cf-4fe2-93b8-7f0a6abe84e1","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>关联容器</p>","uid":"32cc1742-a806-4fb2-add5-0066dfe10086","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>unorded_map</p>","uid":"2840b162-d5c9-4cf0-b917-586e2b46b33c","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>哈希，数组+链表实现机制</p>","uid":"f51e3045-9cb9-4622-b750-43a102549d37","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>map</p>","uid":"fc21381c-bed7-4ca3-9964-e4b4900a68bd","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>红黑树</p>","uid":"f075f955-801d-4673-b292-fc7f9231acfd","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>其他</p>","uid":"d2c2b6d2-9f32-42ff-be82-5ad1daf278f9","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>bitmap</p>","uid":"65382b35-2449-4f7f-972e-10fe63164c9b","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>容器适配器</p>","uid":"73768e29-f45b-436d-a6e0-572100505c83","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>queue</p>","uid":"909a4799-6ce9-4703-b9bf-8f2ae7da5389","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>stack</p>","uid":"386bbf47-4417-4471-a9ad-709f10edd429","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>priority_queue</p>","uid":"12aece27-9cb7-490a-b99d-9aa996c5b195","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>容器设计的元素拷贝</p>","uid":"e15409f9-c5e2-47e6-903f-d0860fea7da6","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>push_back, insert 默认是拷贝对象进容器， pop默认是从容器中拷贝出</p>","uid":"e16e9ab5-de16-4aea-b62e-ffa886c38e65","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>注意插入对象是否是可移动的，如果是，则会调用移动构造</p>","uid":"0b050606-30bd-43eb-85c5-b8912f249561","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>emplace_back 支持<span style=\"color: rgb(244, 78, 59);\">直接构造</span></p>","uid":"e90f6a63-3773-4343-9519-107ef8ecb609","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>序列容器的insert，均满足可移动时有限调用移动构造</p>","uid":"0316a400-204b-439b-8d88-20e64205393a","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>关联容器的insert</p>","uid":"02473266-d50d-4e0e-85b0-727d835d7f5e","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>make_pair</p>","uid":"a96edd67-2585-4035-93b5-4a5aaa465e9c","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>产生一个pair的右值</p>","uid":"9c66782e-9688-4517-9f45-620777000e7d","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>移动构造这个pair</p>","uid":"abea911d-3fec-4112-8d74-ef90b649bdf8","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>key不会移动构造，value视情况可能会移动构造（可移动）</p>","uid":"1879240b-fd61-4840-b739-443e7bc53080","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(244, 78, 59);\">emplace</span></p>","uid":"294aa4ba-75fc-4a5c-b5cc-7469acead2a6","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>直接构造，避免了make_pair 构造临时对象</p>","uid":"83817904-3aaf-4022-92f7-8c3a0952e8e0","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>注意这里不涉及<span style=\"color: rgb(244, 78, 59);\">拷贝</span>，是直接构造，和上面的emplace_back一样</p>","uid":"93986704-da27-44fb-bf48-a516d80e431b","expand":true,"richText":true,"isActive":false},"children":[]}]}]}]},{"data":{"text":"<p>copy in</p>","uid":"f40d8c68-f61c-4384-8450-6ee270ae93a7","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>copy out</p>","uid":"c5175379-436c-4284-a560-cfa7f4c7aec2","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>排序时也会发生copy</p>","uid":"3021e0d1-620f-487a-86ad-4da9736e88b3","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>vector 等数组排序</p>","uid":"0785ca75-fe17-4ee5-8c88-877634da11e2","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>起码需要swap, swap 实现可能会发生copy</p>","uid":"f6abd7e7-30ec-453d-b0a3-8f9d08c925a3","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>避免多态对象直接放object</p>","uid":"a032e34c-ccca-40a2-876b-6750873b08ae","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>直接放值，在拷入时会发生向上窄化</p>","uid":"b1461f60-a0e2-4823-ae44-a2ddc4a7ca6a","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>解决办法是放指针或者shared_ptr&lt;object&gt;</p>","uid":"a2076ce8-4a24-4d98-a180-7dcbe3f05600","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>要确保多态发生作用</p>","uid":"d897186b-fdd5-44c5-87ac-c1c8ec70cbb2","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>判空优先empty</p>","uid":"34864382-b4d2-46d3-92c5-9fc7e8860baf","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>size == 0 判定<span style=\"color: rgb(244, 78, 59);\">可能</span>需要线性时间</p>","uid":"947c286a-94b7-4070-a082-dfbe3c7b48b2","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>list 不存计数器size</p>","uid":"d142c4c8-0d68-4951-94d8-902672e1fdeb","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>C++11 里，部分list实现支持常数时间size</p>","uid":"47f33167-730f-4f71-b721-a889fbbcdb8d","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>具体实现决定</p>","uid":"4d22d81b-7b2e-4eb2-94b5-77b5fd7f167d","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>vector的size（）是常数时间，end()-begin() 即可计算出</p>","uid":"23540041-1637-421f-bc29-eb5205b9e822","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>list.splice 其实是很冷门的API，用的比较少</p>","uid":"f1e676d4-c6b5-4c36-96cc-06020b1c3116","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>比如stl的归并排序就有用到splice</p>","uid":"4694909f-605c-4dc1-83f9-37edeb04b1c9","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>含义是把某个链表放到本链表某个位置之前，并清空b</p>","uid":"bd263033-7247-45a2-91c2-1df053934382","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>基于区间的操作函数优于单元素版本</p>","uid":"5fbcce87-4538-4975-bae9-f5634d15ce25","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>通常基于区间的成员函数，会有一个对应的单元素版本</p>","uid":"54f82a5e-994f-4a3d-8ba5-1288172591f5","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>insert</p>","uid":"f6440803-00ee-4b40-a8da-42693dd42a88","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>insert(a.begin(), b.begin(), b.end())</p>","uid":"c13a0a7a-4bfe-4de4-a041-7072f0522701","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>insert(a.some_pose, v)</p>","uid":"ead5dd9e-c68b-464a-a1e6-e835591c88ca","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>erase</p>","uid":"08e80639-e6d7-4a3e-87a0-c39bb19b2678","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>a.erase(a.begin())</p>","uid":"6b7104c2-9db5-4108-94f5-5e5794c411a8","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>a.erase(a.begin(), a.begin() + 3)</p>","uid":"51ca7225-0423-4ce5-9b98-32ac6f2c79c4","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>反之不一定</p>","uid":"42714d5a-3d5b-4f29-a775-954099ae0ae7","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>push_back, emplace_back 没有区间版本</p>","uid":"7872e8dd-ea6f-4e5f-af36-36c14f61dc9d","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>核心含义是，在批量操作时，应当<span style=\"color: rgb(244, 78, 59);\">优先选</span>择基于区间的版本</p>","uid":"4c3e9816-652e-4d43-adc8-acb7bd5c24ef","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>代码更清晰</p>","uid":"87d2f7bf-10c0-44d1-b00b-e1c1d274c5f5","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>vector 这种可能扩容的容器，批量操作会允许一次性计算好容量而扩容</p>","uid":"6c64504a-8ce4-4d73-af93-c47adb8e64ff","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>单元素版本（如反复insert），可能会触发多次扩容</p>","uid":"b5ab7cf9-5f25-4062-aff1-5e9453220ee1","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>单元素的循环版本可能会引起迭代器失效，从而引起bug</p>","uid":"6917e5ef-33d8-4da1-a19a-fcf46bca728e","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>性能上通常也会比反复调用的性能要好</p>","uid":"5461c68a-9cc5-49e7-a75f-bab345bc2677","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>ESTL 用copy/insert/assign 做了对比，这里的copy是指stl中基本的copy算法</p>","uid":"1dac3562-1e26-42aa-9759-b5963f1dfece","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>copy算法要求目标容器已分配内存</p>","uid":"26750f4b-4289-4d30-9a71-594de75eb6c4","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>或者要提供一个输出迭代器，如inserter</p>","uid":"74c9f6c1-594b-453d-9fbf-ad6a35b87826","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>inserter代价：等价于逐个元素插入</p>","uid":"00893a90-bb35-4442-8206-9cfc9a45fffd","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(244, 78, 59);\">assign</span></p>","uid":"1e2da14e-9968-46c2-961b-73f181d7822f","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>不是拷贝赋值，支持复制源容器到本容器中的一部分（可以是全部）</p>","uid":"d4c3931d-8879-45f1-877c-f28d02eb525b","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>本容器容量不够？</p>","uid":"c6e4c3b5-e644-4609-b9e5-0135f7363046","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>本容器容量足够?</p>","uid":"a601ee43-2d85-429b-a798-da78b1b36bff","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>清空源容器中的内容</p>","uid":"15efe209-dbc1-4e5e-9c95-e70759c012ce","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>效率相比较于逐个赋值确实高很多，在x86上测试差距有30倍</p>","uid":"297c0cf9-523d-4f66-be7e-507c3f8e3f4b","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>insert</p>","uid":"5bf602f5-52d7-49f8-b3fa-86c2a9db78af","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>在某个位置<span style=\"color: rgb(244, 78, 59);\">插入</span>一部分元素</p>","uid":"10f9fe04-43d1-4cfe-ac5c-c8dd906591f3","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>保留源容器中的内容</p>","uid":"5e103b28-0724-4a5e-9da3-2db5ff749837","expand":true,"richText":true,"isActive":false},"children":[]}]}]}]}],"smmVersion":"0.14.0-fix.1"},"theme":{"template":"classic4","config":{}},"view":{"transform":{"scaleX":1,"scaleY":1,"shear":0,"rotate":0,"translateX":-997,"translateY":1213,"originX":0,"originY":0,"a":1,"b":0,"c":0,"d":1,"e":-997,"f":1213},"state":{"scale":1,"x":-997,"y":1213,"sx":-543,"sy":-1021}}}
=======
{"layout":"logicalStructure","root":{"data":{"text":"<p>STL</p>","expand":true,"uid":"b740b632-5de4-462d-bddf-81269595de64","richText":true,"isActive":false,"imgMap":{}},"children":[{"data":{"text":"<p>stl中的容器</p>","uid":"cfc7006f-154e-442e-88c0-302c1b8ba7c9","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>序列容器</p>","uid":"6b35de9a-cac0-4826-b367-d6af6d30f178","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>vector</p>","uid":"800c0495-3154-47f4-a193-4f05c18020db","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>动态数组，有动态扩容机制, 迭代器失效</p>","uid":"3a14011e-f6e4-422d-a64d-f97f7ce0bf2d","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>随机访问、连续存储，支持[]</p>","uid":"e65be76e-33fb-4103-b414-bcec8114e567","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>支持reserve和capacity</p>","uid":"027416cb-46ce-48cd-820e-c3fd021109e8","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>list</p>","uid":"2b9f8160-ac8a-49d3-8858-33b2ac50b162","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>双向链表，迭代器可往前往后</p>","uid":"82259cfc-8608-4270-b803-2cb46366f4d2","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>forward_list</p>","uid":"c954ae6f-cf56-4345-9b4d-6dad6a112dea","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>单向链表，迭代器只能往前</p>","uid":"992448f5-7970-4986-8209-1d6522b748e6","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>string</p>","uid":"acc79715-8387-46fa-be67-d7751fc8c5ee","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>basic_string的char特化版本</p>","uid":"d45e16f8-e523-41ce-b4d6-6cc225b9d349","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>deque</p>","uid":"a1b492e2-ed0d-41d2-8df4-b867e208f186","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>头尾可插入，linked array</p>","uid":"6fbcaf72-36cf-4fe2-93b8-7f0a6abe84e1","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>关联容器</p>","uid":"32cc1742-a806-4fb2-add5-0066dfe10086","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>unorded_map</p>","uid":"2840b162-d5c9-4cf0-b917-586e2b46b33c","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>哈希，数组+链表实现机制</p>","uid":"f51e3045-9cb9-4622-b750-43a102549d37","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>map</p>","uid":"fc21381c-bed7-4ca3-9964-e4b4900a68bd","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>红黑树</p>","uid":"f075f955-801d-4673-b292-fc7f9231acfd","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>其他</p>","uid":"d2c2b6d2-9f32-42ff-be82-5ad1daf278f9","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>bitmap</p>","uid":"65382b35-2449-4f7f-972e-10fe63164c9b","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>容器适配器</p>","uid":"73768e29-f45b-436d-a6e0-572100505c83","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>queue</p>","uid":"909a4799-6ce9-4703-b9bf-8f2ae7da5389","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>stack</p>","uid":"386bbf47-4417-4471-a9ad-709f10edd429","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>priority_queue</p>","uid":"12aece27-9cb7-490a-b99d-9aa996c5b195","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>容器设计的元素拷贝</p>","uid":"e15409f9-c5e2-47e6-903f-d0860fea7da6","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>push_back, insert 默认是拷贝对象进容器， pop默认是从容器中拷贝出</p>","uid":"e16e9ab5-de16-4aea-b62e-ffa886c38e65","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>注意插入对象是否是可移动的，如果是，则会调用移动构造</p>","uid":"0b050606-30bd-43eb-85c5-b8912f249561","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>emplace_back 支持<span style=\"color: rgb(244, 78, 59);\">直接构造</span></p>","uid":"e90f6a63-3773-4343-9519-107ef8ecb609","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>序列容器的insert，均满足可移动时有限调用移动构造</p>","uid":"0316a400-204b-439b-8d88-20e64205393a","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>关联容器的insert</p>","uid":"02473266-d50d-4e0e-85b0-727d835d7f5e","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>make_pair</p>","uid":"a96edd67-2585-4035-93b5-4a5aaa465e9c","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>产生一个pair的右值</p>","uid":"9c66782e-9688-4517-9f45-620777000e7d","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>移动构造这个pair</p>","uid":"abea911d-3fec-4112-8d74-ef90b649bdf8","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>key不会移动构造，value视情况可能会移动构造（可移动）</p>","uid":"1879240b-fd61-4840-b739-443e7bc53080","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(244, 78, 59);\">emplace</span></p>","uid":"294aa4ba-75fc-4a5c-b5cc-7469acead2a6","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>直接构造，避免了make_pair 构造临时对象</p>","uid":"83817904-3aaf-4022-92f7-8c3a0952e8e0","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>注意这里不涉及<span style=\"color: rgb(244, 78, 59);\">拷贝</span>，是直接构造，和上面的emplace_back一样</p>","uid":"93986704-da27-44fb-bf48-a516d80e431b","expand":true,"richText":true,"isActive":false},"children":[]}]}]}]},{"data":{"text":"<p>copy in</p>","uid":"f40d8c68-f61c-4384-8450-6ee270ae93a7","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>copy out</p>","uid":"c5175379-436c-4284-a560-cfa7f4c7aec2","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>排序时也会发生copy</p>","uid":"3021e0d1-620f-487a-86ad-4da9736e88b3","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>vector 等数组排序</p>","uid":"0785ca75-fe17-4ee5-8c88-877634da11e2","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>起码需要swap, swap 实现可能会发生copy</p>","uid":"f6abd7e7-30ec-453d-b0a3-8f9d08c925a3","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>避免多态对象直接放object</p>","uid":"a032e34c-ccca-40a2-876b-6750873b08ae","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>直接放值，在拷入时会发生向上窄化</p>","uid":"b1461f60-a0e2-4823-ae44-a2ddc4a7ca6a","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>解决办法是放指针或者shared_ptr&lt;object&gt;</p>","uid":"a2076ce8-4a24-4d98-a180-7dcbe3f05600","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>要确保多态发生作用</p>","uid":"d897186b-fdd5-44c5-87ac-c1c8ec70cbb2","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>operator []</p>","uid":"ea025312-0429-48ce-986d-7cfe9269953c","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>对于关联容器而言，operator[] 用于<span style=\"color: rgb(244, 78, 59);\">更新</span>更合适</p>","uid":"653b8cd6-8afb-4ab6-b425-90b4bb604a2c","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>插入推荐用emplace，或者insert</p>","uid":"893b057b-e9cd-44e2-a4c1-374c60589f0d","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>判空优先empty</p>","uid":"34864382-b4d2-46d3-92c5-9fc7e8860baf","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>size == 0 判定<span style=\"color: rgb(244, 78, 59);\">可能</span>需要线性时间</p>","uid":"947c286a-94b7-4070-a082-dfbe3c7b48b2","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>list 不存计数器size</p>","uid":"d142c4c8-0d68-4951-94d8-902672e1fdeb","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>C++11 里，部分list实现支持常数时间size</p>","uid":"47f33167-730f-4f71-b721-a889fbbcdb8d","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>具体实现决定</p>","uid":"4d22d81b-7b2e-4eb2-94b5-77b5fd7f167d","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>vector的size（）是常数时间，end()-begin() 即可计算出</p>","uid":"23540041-1637-421f-bc29-eb5205b9e822","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>list.splice 其实是很冷门的API，用的比较少</p>","uid":"f1e676d4-c6b5-4c36-96cc-06020b1c3116","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>比如stl的归并排序就有用到splice</p>","uid":"4694909f-605c-4dc1-83f9-37edeb04b1c9","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>含义是把某个链表放到本链表某个位置之前，并清空b</p>","uid":"bd263033-7247-45a2-91c2-1df053934382","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>基于区间的操作函数优于单元素版本</p>","uid":"5fbcce87-4538-4975-bae9-f5634d15ce25","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>通常基于区间的成员函数，会有一个对应的单元素版本</p>","uid":"54f82a5e-994f-4a3d-8ba5-1288172591f5","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>insert</p>","uid":"f6440803-00ee-4b40-a8da-42693dd42a88","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>insert(a.begin(), b.begin(), b.end())</p>","uid":"c13a0a7a-4bfe-4de4-a041-7072f0522701","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>insert(a.some_pose, v)</p>","uid":"ead5dd9e-c68b-464a-a1e6-e835591c88ca","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>erase</p>","uid":"08e80639-e6d7-4a3e-87a0-c39bb19b2678","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>a.erase(a.begin())</p>","uid":"6b7104c2-9db5-4108-94f5-5e5794c411a8","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>a.erase(a.begin(), a.begin() + 3)</p>","uid":"51ca7225-0423-4ce5-9b98-32ac6f2c79c4","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>反之不一定</p>","uid":"42714d5a-3d5b-4f29-a775-954099ae0ae7","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>push_back, emplace_back 没有区间版本</p>","uid":"7872e8dd-ea6f-4e5f-af36-36c14f61dc9d","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>核心含义是，在批量操作时，应当<span style=\"color: rgb(244, 78, 59);\">优先选</span>择基于区间的版本</p>","uid":"4c3e9816-652e-4d43-adc8-acb7bd5c24ef","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>代码更清晰</p>","uid":"87d2f7bf-10c0-44d1-b00b-e1c1d274c5f5","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>vector 这种可能扩容的容器，批量操作会允许一次性计算好容量而扩容</p>","uid":"6c64504a-8ce4-4d73-af93-c47adb8e64ff","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>单元素版本（如反复insert），可能会触发多次扩容</p>","uid":"b5ab7cf9-5f25-4062-aff1-5e9453220ee1","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>单元素的循环版本可能会引起迭代器失效，从而引起bug</p>","uid":"6917e5ef-33d8-4da1-a19a-fcf46bca728e","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>性能上通常也会比反复调用的性能要好</p>","uid":"5461c68a-9cc5-49e7-a75f-bab345bc2677","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>ESTL 用copy/insert/assign 做了对比，这里的copy是指stl中基本的copy算法</p>","uid":"1dac3562-1e26-42aa-9759-b5963f1dfece","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>copy算法要求目标容器已分配内存</p>","uid":"26750f4b-4289-4d30-9a71-594de75eb6c4","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>或者要提供一个输出迭代器，如inserter</p>","uid":"74c9f6c1-594b-453d-9fbf-ad6a35b87826","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>inserter代价：等价于逐个元素插入</p>","uid":"00893a90-bb35-4442-8206-9cfc9a45fffd","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p><span style=\"color: rgb(244, 78, 59);\">assign</span></p>","uid":"1e2da14e-9968-46c2-961b-73f181d7822f","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>不是拷贝赋值，支持复制源容器到本容器中的一部分（可以是全部）</p>","uid":"d4c3931d-8879-45f1-877c-f28d02eb525b","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>本容器容量不够？</p>","uid":"c6e4c3b5-e644-4609-b9e5-0135f7363046","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>本容器容量足够?</p>","uid":"a601ee43-2d85-429b-a798-da78b1b36bff","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>清空源容器中的内容</p>","uid":"15efe209-dbc1-4e5e-9c95-e70759c012ce","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>insert</p>","uid":"5bf602f5-52d7-49f8-b3fa-86c2a9db78af","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>在某个位置<span style=\"color: rgb(244, 78, 59);\">插入</span>一部分元素</p>","uid":"10f9fe04-43d1-4cfe-ac5c-c8dd906591f3","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>保留源容器中的内容</p>","uid":"5e103b28-0724-4a5e-9da3-2db5ff749837","expand":true,"richText":true,"isActive":false},"children":[]}]}]}]}],"smmVersion":"0.14.0-fix.1"},"theme":{"template":"classic4","config":{}},"view":{"transform":{"scaleX":1,"scaleY":1,"shear":0,"rotate":0,"translateX":-173,"translateY":-482,"originX":0,"originY":0,"a":1,"b":0,"c":0,"d":1,"e":-173,"f":-482},"state":{"scale":1,"x":-173,"y":-482,"sx":-140,"sy":-494}}}
>>>>>>> Stashed changes
