{"layout":"logicalStructure","root":{"data":{"text":"<p>左右值</p>","expand":true,"uid":"acc01eac-c859-4b1c-a76b-b0d29f1ffbdc","richText":true,"isActive":false,"imgMap":{}},"children":[{"data":{"text":"<p>左值</p>","uid":"74941b88-243b-4396-931f-30e40af832d9","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>可以取地址的对象</p>","uid":"ddbb4b53-2147-49b7-acc4-a9be24ca6c98","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>具名的右值引用也是左值</p>","uid":"d7946d56-fcc3-4755-b959-c807a50fb043","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>左值引用绑定到右值确实也报错</p>","uid":"8c2a753a-dfce-436a-b835-36c4d75d5d85","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>右值</p>","uid":"400cc649-4f95-4cc2-8a94-ccddc2d654d3","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>函数返回值</p>","uid":"6331e96f-975a-47f0-876f-d0bc85d2dacb","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>从函数内部返回的值，需要复制一次，默认调用拷贝构造</p>","uid":"12ca5982-cfdf-4a43-a0fc-fbfaca7fd7ef","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>通过std::move(ret_val), <span style=\"color: rgb(244, 78, 59);\">强制匹配移动构造，消减复制开销</span></p>","uid":"e4ca8286-d71a-4b0a-b6b9-f0112dbbfa34","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>有移动构造</p>","uid":"285df217-ce8e-4ff4-a621-7be0045d1166","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>可移动对象</p>","uid":"01bc393f-e9c1-45a3-8453-b9380a628314","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>RVO 返回值优化</p>","uid":"644d10ef-61a8-4ff4-8a50-6ec6a2ce7b8a","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>编译器在调用者内存空间构造返回对象</p>","uid":"812056ab-214c-4410-958a-61e2d02411a1","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>NRVO</p>","uid":"ff056fa3-1b43-4061-846d-69cb2e608742","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>函数返回值直接绑定到左值时，直接在该左值上构造返回值</p>","uid":"24266ed8-da83-4420-9072-16585dc916e2","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>举例: a=Foo(); 则Foo直接在a上构造</p>","uid":"6be84156-ef58-47f8-b12d-fd06669e2cf3","expand":true,"richText":true,"isActive":false},"children":[]}]}]}]},{"data":{"text":"<p>std::move&nbsp;&nbsp;产生的值</p>","uid":"91b5eaab-02bd-49d4-a138-f19fe04a520d","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>接受万能引用，强制转为右值引用</p>","uid":"94a8650b-dca0-4898-b886-dcc981a325ca","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>对比std::ref</p>","uid":"b0cc6cc0-5500-40c6-ad07-a80c5a92dd9f","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>传值场合传引用，常见搭配std::bind和 std::thread</p>","uid":"541c7799-f83a-485d-bfbd-bbb6869c899f","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>核心含义：标记对象可移动</p>","uid":"5803edf9-a105-437e-a035-1390a678a2b2","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>表达式产生的值</p>","uid":"a94d1387-d217-4c4f-b148-22de02051716","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>主要价值</p>","uid":"5458ab7f-58b8-4458-b164-acc33ea0521c","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>匹配移动构造，减少复制开销</p>","uid":"b8e80fdd-6e4d-411b-ad5b-cc524e24df01","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>绑定临时对象，延长临时对象生命周期</p>","uid":"bb2dd850-1007-4890-ad83-02a7c68e3143","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>将亡值</p>","uid":"b57cfdd3-00d3-42d5-81ec-90313602e920","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>通过右值产生的值</p>","uid":"808230ce-98c5-4981-b989-88cc4c86f427","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>xvalue的生命周期无法被延长</p>","uid":"667b03f6-ae04-42ca-abb5-c19d6b174bd2","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>万能引用</p>","uid":"5b45b4f4-3b6e-4f5e-8596-af8c3451e1d6","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>T&amp;&amp;， 必须由模板推到确认的引用才是万能引用</p>","uid":"354c47e8-1f6d-40f7-963c-5997f2972096","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>引用折叠</p>","uid":"562b7ce1-b4a9-4127-8244-15cb8fd71696","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>完美转发</p>","uid":"80d6248d-7f26-486f-88e1-3a72b94de2e4","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>根据参数的引用类型转发为左值引用或者右值引用</p>","uid":"05e1a6c2-ed48-4130-8627-d21e0ac0ecfa","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>其实用处很多，比如unique_ptr /shared_ptr 的构造场合，要把参数无损转发到目标函数</p>","uid":"cab679ca-8e8b-4f67-a4a2-0cb1f91d0a15","expand":true,"richText":true,"isActive":false},"children":[]}]}]}],"smmVersion":"0.14.0-fix.1"},"theme":{"template":"classic4","config":{}},"view":{"transform":{"scaleX":1,"scaleY":1,"shear":0,"rotate":0,"translateX":-877,"translateY":-123,"originX":0,"originY":0,"a":1,"b":0,"c":0,"d":1,"e":-877,"f":-123},"state":{"scale":1,"x":-877,"y":-123,"sx":-877,"sy":-123}}}